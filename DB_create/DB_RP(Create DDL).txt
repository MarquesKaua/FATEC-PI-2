CREATE DATABASE RP_eventos;

USE RP_eventos;

CREATE TABLE usuario(
    userId INT NOT NULL AUTO_INCREMENT,
    userNome VARCHAR(60) NOT NULL,
    userSenha VARCHAR(40) NOT NULL,
    PRIMARY KEY(userId)
);

CREATE TABLE tutor(
    tutorCPF VARCHAR(11) NOT NULL,
    tutorNome VARCHAR(50) NOT NULL,
    tutorSobrenome VARCHAR(100) NOT NULL,
    tutorRG VARCHAR(10) NOT NULL,
    tutorEmail1 VARCHAR(100) NOT NULL,
    tutorEmail2 VARCHAR(100),
    tutorTel1 VARCHAR(11) NOT NULL,
    tutorTel2 VARCHAR(11),
    tutorTel3 VARCHAR(11),
    PRIMARY KEY(tutorCPF)
);

CREATE TABLE temporadas(
    tempId INT NOT NULL AUTO_INCREMENT,
    tempDataInicio DATE NOT NULL,
    tempDataFim DATE NOT NULL,
    tempPreco FLOAT(6,2) NOT NULL,
    tempMaxParcela INT NOT NULL,
    PRIMARY KEY(tempId)
);

CREATE TABLE endereco(
    resId INT NOT NULL AUTO_INCREMENT,
    resNum INT NOT NULL,
    resBairro VARCHAR(50) NOT NULL,
    resRua VARCHAR(150) NOT NULL,
    resCEP VARCHAR(8) NOT NULL,
    resCidade VARCHAR(100) NOT NULL,
    resUF VARCHAR(2) NOT NULL,
    PRIMARY KEY(resId)
);

CREATE TABLE campista(
    campId INT NOT NULL AUTO_INCREMENT,
    campNome VARCHAR(50) NOT NULL,
    campSobrenome VARCHAR(100) NOT NULL,
    campRG VARCHAR(10) NOT NULL,
    campDataNasci DATE NOT NULL,
    campIdade INT NOT NULL,
    campSexo VARCHAR(9) NOT NULL,
    campCamiseta VARCHAR(3) NOT NULL,
    campSangue VARCHAR(10) NOT NULL,
    campMedLib VARCHAR(400),
    camp_resId INT NOT NULL,
    PRIMARY KEY(campId),
    CONSTRAINT fk_Endereco_Campista FOREIGN KEY (camp_resId) REFERENCES endereco(resId)
);

CREATE TABLE tutor_campista(
    tcId INT NOT NULL AUTO_INCREMENT,
    tc_campId INT NOT NULL,
    tc_tutorCPF VARCHAR(11) NOT NULL,
    PRIMARY KEY(tcId),
    CONSTRAINT fk_Tutor_Tc FOREIGN KEY (tc_tutorCPF) REFERENCES tutor(tutorCPF),
    CONSTRAINT fk_Campista_Tc FOREIGN KEY (tc_campId) REFERENCES campista(campId)
);

CREATE TABLE inscricao(
    inscId INT NOT NULL AUTO_INCREMENT,
    inscCodigo INT NOT NULL,
    inscData DATE NOT NULL,
    inscPagamento VARCHAR(17) NOT NULL,
    insc_tutorCPF VARCHAR(11) NOT NULL,
    insc_campId INT NOT NULL,
    insc_tempId INT NOT NULL,
    PRIMARY KEY(inscId),
    CONSTRAINT fk_Temporadas_Inscricao FOREIGN KEY (insc_tempId) REFERENCES temporadas(tempId),
    CONSTRAINT fk_Tutor_Inscricao FOREIGN KEY (insc_tutorCPF) REFERENCES tutor(tutorCPF),
    CONSTRAINT fk_Campista_Inscricao FOREIGN KEY (insc_campId) REFERENCES campista(campId)
);

CREATE TABLE convenio(
    convId INT NOT NULL AUTO_INCREMENT,
    convNome VARCHAR(100) NOT NULL,
    convNum VARCHAR(25) NOT NULL,
    convTel VARCHAR(11) NOT NULL,
    convObs VARCHAR(200),
    conv_campId INT NOT NULL,
    PRIMARY KEY(convId),
    CONSTRAINT fk_Campista_Convenio FOREIGN KEY (conv_campId) REFERENCES campista(campId)
);

CREATE TABLE vacina(
    vacId INT NOT NULL AUTO_INCREMENT,
    vacNome VARCHAR(50) NOT NULL,
    PRIMARY KEY(vacId)
);

CREATE TABLE doenca(
    doeId INT NOT NULL AUTO_INCREMENT,
    doeNome VARCHAR(50) NOT NULL,
    doeTipo VARCHAR(40) NOT NULL,
    doeCategoria VARCHAR(40) NOT NULL,
    PRIMARY KEY(doeId)
);

CREATE TABLE medicamento(
    medId INT NOT NULL AUTO_INCREMENT,
    medNome VARCHAR(50) NOT NULL,
    PRIMARY KEY(medId)
);

CREATE TABLE registro_vacina(
    rvId INT NOT NULL AUTO_INCREMENT,
    rv_vacId INT NOT NULL,
    rv_campId INT NOT NULL,
    PRIMARY KEY(rvId),
    CONSTRAINT fk_Vacina_Rv FOREIGN KEY (rv_vacId) REFERENCES vacina(vacId),
    CONSTRAINT fk_Campista_Rv FOREIGN KEY (rv_campId) REFERENCES campista(campId)
);

CREATE TABLE registro_doenca(
    rdId INT NOT NULL AUTO_INCREMENT,
    rdObs VARCHAR(200),
    rd_doeId INT NOT NULL,
    rd_campId INT NOT NULL,
    PRIMARY KEY(rdId),
    CONSTRAINT fk_Doenca_Rd FOREIGN KEY (rd_doeId) REFERENCES doenca(doeId),
    CONSTRAINT fk_Campista_Rd FOREIGN KEY (rd_campId) REFERENCES campista(campId)
);

CREATE TABLE registro_med(
    rmId INT NOT NULL AUTO_INCREMENT,
    rmHorario VARCHAR(5) NOT NULL,
    rmQuantidade VARCHAR(6) NOT NULL,
    rm_medId INT NOT NULL,
    rm_campId INT NOT NULL,
    PRIMARY KEY(rmId),
    CONSTRAINT fk_Medicamento_Rm FOREIGN KEY (rm_medId) REFERENCES medicamento(medId),
    CONSTRAINT fk_Campista_Rm FOREIGN KEY (rm_campId) REFERENCES campista(campId)
);

INSERT INTO usuario VALUES (default, 'root', 'root0101');

INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Catapora', 'Viral', 'Infecção');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Caxumba', 'Viral', 'Infecção');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Sarampo', 'Viral', 'Infecção');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Rubéola', 'Viral', 'Infecção');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Gripe', 'Viral', 'Infecção');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Asma', 'Crônica', 'Respiratória');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Bronquite', 'Crônica', 'Respiratória');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Diabetes Tipo 1', 'Crônica', 'Metabólica');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Epilepsia', 'Crônica', 'Neurológica');
INSERT INTO doenca (doeNome, doeTipo, doeCategoria) VALUES ('Alergia Alimentar', 'Crônica', 'Imunológica');

INSERT INTO medicamento (medNome) VALUES ('Paracetamol');
INSERT INTO medicamento (medNome) VALUES ('Ibuprofeno');
INSERT INTO medicamento (medNome) VALUES ('Amoxicilina');
INSERT INTO medicamento (medNome) VALUES ('Cetirizina');
INSERT INTO medicamento (medNome) VALUES ('Salbutamol');
INSERT INTO medicamento (medNome) VALUES ('Insulina');
INSERT INTO medicamento (medNome) VALUES ('Ranitidina');
INSERT INTO medicamento (medNome) VALUES ('Metformina');
INSERT INTO medicamento (medNome) VALUES ('Clenil');
INSERT INTO medicamento (medNome) VALUES ('Desloratadina');

INSERT INTO vacina (vacNome) VALUES ('BCG');
INSERT INTO vacina (vacNome) VALUES ('Hepatite B');
INSERT INTO vacina (vacNome) VALUES ('Penta/DTP');
INSERT INTO vacina (vacNome) VALUES ('VIP/VOP');
INSERT INTO vacina (vacNome) VALUES ('Rotavírus');
INSERT INTO vacina (vacNome) VALUES ('Pneumocócica 10-valente');
INSERT INTO vacina (vacNome) VALUES ('Meningocócica C');
INSERT INTO vacina (vacNome) VALUES ('Tríplice Viral (Sarampo, Caxumba e Rubéola)');
INSERT INTO vacina (vacNome) VALUES ('Varicela');
INSERT INTO vacina (vacNome) VALUES ('HPV');